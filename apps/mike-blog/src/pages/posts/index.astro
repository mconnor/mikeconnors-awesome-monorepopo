---
import { getCollection } from 'astro:content';
import PostList from '#components/PostList/index.astro';
import Layout from '#layouts/Layout.astro';
import Headline from '#components/Headline.astro';

// export const prerender = true;
const publishsedPosts = await getCollection(
  'blog',
  // ({ data }) => data.draft !== true,
);

// const posts = publishsedPosts.sort((a, b) => {
//   const dateA = a.data.date ? a.data.date.valueOf() : 0;
//   const dateB = b.data.date ? b.data.date.valueOf() : 0;
//   return dateB - dateA;
// });
const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout maxW="80ch">
  <PostList posts={posts} headline="Blog Posts" />
</Layout>
