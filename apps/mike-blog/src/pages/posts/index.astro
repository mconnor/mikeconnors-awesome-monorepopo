---
import { getCollection } from 'astro:content';
import ListOfPost from '#components/PostList/index.astro';
import PostCard from '#components/PostCard/index.astro';
import PostList from '#components/PostList/index.astro';

import Layout from '#layouts/Layout.astro';
import Stack from '@repo/layout-webcomponents/Stack';

const publishsedPosts = await getCollection(
  'blog',
  ({ data }) => data.draft !== true,
);

const posts = publishsedPosts.sort((a, b) => {
  const dateA = a.data.date ? a.data.date.valueOf() : 0;
  const dateB = b.data.date ? b.data.date.valueOf() : 0;
  return dateB - dateA;
});
---

<Layout title="Blog" maxW="80ch">
  <PostList posts={posts} />
</Layout>
