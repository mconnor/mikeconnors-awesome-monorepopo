---
import { z } from 'astro:content';
import Filter from '#components/Filter.astro';
import StatsWidget from '#components/filterDemo/Stats.astro';
import FrameworkCard from '#components/filterDemo/FrameworkCard.astro';
import ProjectRow from '#components/ProjectRow.astro';

import { projectData } from '#app.config.ts';
import { zTableRowSchema } from '#schemas/index.ts';

import Layout from '#layouts/Layout.astro';

interface PrType {
  framework: 'svelte' | 'vue' | 'react';
  projectName: string;
  description: string;
  githubUrl: string;
  demoUrl: string;
}

// type ProjDataType= keyof typeof projectData;
---

<Layout>
  <div class="mx-auto max-w-7xl p-8">
    <!-- Header -->
    <div class="border-1 mb-8 text-center">
      <h1 class="text-base-content mb-4 text-4xl font-bold">
        Framework Filter Demo
      </h1>
      <p class="text-base-content/70 mx-auto max-w-2xl text-lg">
        Use the filter below to toggle visibility of components based on their
        framework. This demonstrates how the DaisyUI Filter component can
        control other components.
      </p>
    </div>

    <!-- Filter Component -->
    <div class="border-1 mb-8 flex justify-center">
      <div class="card bg-base-100 shadow-lg">
        <div class="card-body items-center text-center">
          <h2 class="card-title mb-4">Filter by Framework</h2>
          <Filter />
        </div>
      </div>
    </div>

    <!-- Framework Cards Section -->
    <section class="border-1 mb-12">
      <h2 class="text-base-content mb-6 text-2xl font-bold">
        Framework Showcase
      </h2>
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
        {
          projectData.map((item) => (
            <FrameworkCard
              framework={item.framework}
              title={item.title}
              description={item.description}
            />
          ))
        }
      </div>
    </section>

    <!-- Projects Table Section -->
    <!-- <section>
      <h2 class="text-base-content mb-6 text-2xl font-bold">Projects Table</h2>
      <div
        class="rounded-box border-base-content/5 bg-base-100 overflow-x-auto border"
      >
        <table class="table-zebra table table-auto">
          <thead>
            <tr>
              <th>Project</th>
              <th>Description</th>
              <th>Links</th>
            </tr>
          </thead>
          <tbody>
            {
              projectData.map((p) => (
                <ProjectRow project={zProjSchema.parse(p)} />
              ))
            }
          </tbody>
        </table>
      </div>
    </section> -->

    <!-- Additional Filterable Content -->
    <section class="border-1 mt-12">
      <h2 class="text-base-content mb-6 text-2xl font-bold">Quick Stats</h2>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
        <div data-framework="react">
          <StatsWidget
            framework="react"
            description="Dashboard & Blog"
            daisyColor="primary"
            count={2}
            emoji="⚛️"
          />
        </div>
        <div data-framework="svelte">
          <StatsWidget
            framework="svelte"
            description="Weather, Portfolio, SvelteKit"
            daisyColor="primary"
            count={3}
            emoji="🔥"
          />
        </div>

        <div data-framework="vue">
          <StatsWidget
            framework="vue"
            description="Tasks & Nuxt site"
            daisyColor="accent"
            count={4}
            emoji="💚"
          />
        </div>
      </div>
    </section>

    <!-- Custom Script for Enhanced Filtering -->
  </div>
</Layout>

<script src="../libs/filterPage.ts"></script>
